# نظام استرجاع كلمة المرور - لوحة التحكم

## نظرة عامة

تم إنشاء نظام آمن لاسترجاع كلمة مرور لوحة التحكم باستخدام Vercel Environment Variables. هذا النظام يمنع كلمة المرور من الظهور في GitHub ويحافظ على أمانها.

## كيفية العمل

### 1. إعداد كلمة المرور في Vercel

```bash
# تعيين كلمة المرور في Vercel Environment Variables
vercel env add DASHBOARD_PASSWORD production
# أدخل كلمة المرور عندما يطلب منك

# أو يمكنك تعيينها لجميع البيئات
vercel env add DASHBOARD_PASSWORD
```

### 2. استخدام نظام الاسترجاع

1. **اذهب إلى صفحة تسجيل الدخول**: `/login`
2. **اضغط على "نسيت كلمة المرور؟"**
3. **اضغط على "استرجاع كلمة المرور"**
4. **سيتم استرجاع كلمة المرور من Vercel Environment Variables**
5. **انسخ كلمة المرور واستخدمها**

## الميزات الأمنية

### ✅ الأمان
- كلمة المرور لا تظهر في GitHub
- ملف `.env.local` يتم حذفه تلقائياً بعد القراءة
- التحقق من بيئة آمنة
- timeout للعمليات (30 ثانية)

### ✅ سهولة الاستخدام
- واجهة بسيطة وواضحة
- إمكانية نسخ كلمة المرور بنقرة واحدة
- إخفاء/إظهار كلمة المرور
- رسائل خطأ واضحة

### ✅ المرونة
- يعمل مع Vercel Environment Variables
- fallback إلى `process.env` إذا فشل `vercel env pull`
- دعم لجميع البيئات (development, preview, production)

## الأوامر المفيدة

```bash
# عرض متغيرات البيئة الحالية
vercel env ls

# سحب متغيرات البيئة إلى ملف محلي
vercel env pull .env.local

# تعيين متغير بيئة جديد
vercel env add DASHBOARD_PASSWORD

# حذف متغير بيئة
vercel env rm DASHBOARD_PASSWORD
```

## استكشاف الأخطاء

### المشكلة: "فشل في استرجاع كلمة المرور"
**الحل**: تأكد من:
1. تسجيل الدخول إلى Vercel CLI: `vercel login`
2. وجود متغير `DASHBOARD_PASSWORD` في Vercel
3. الصلاحيات الكافية للمشروع

### المشكلة: "لم يتم العثور على ملف البيئة"
**الحل**: 
1. تأكد من أن `vercel env pull` يعمل بشكل صحيح
2. تحقق من وجود ملف `.env.local` في المجلد الجذر

### المشكلة: "timeout"
**الحل**:
1. تحقق من اتصال الإنترنت
2. تأكد من أن Vercel CLI محدث: `npm i -g vercel@latest`

## ملاحظات مهمة

⚠️ **تحذير أمني**: 
- استخدم هذا النظام فقط في بيئة آمنة
- لا تشارك كلمة المرور مع أي شخص
- احذف ملف `.env.local` يدوياً إذا لم يتم حذفه تلقائياً

🔒 **أفضل الممارسات**:
- استخدم كلمة مرور قوية ومعقدة
- غيّر كلمة المرور بانتظام
- استخدم متغيرات بيئة منفصلة لكل بيئة

## الدعم

إذا واجهت أي مشاكل، تحقق من:
1. سجلات Vercel Functions
2. console logs في المتصفح
3. حالة Vercel CLI
4. صلاحيات المشروع في Vercel Dashboard 